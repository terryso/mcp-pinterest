# 用户故事: US-Future-002 - 自定义文件名模板

**作为** 服务器管理员，
**我想要** 通过设置一个环境变量 (`MCP_PINTEREST_FILENAME_TEMPLATE`) 来定义 Pinterest MCP 服务器下载文件时使用的全局命名模板，
**以便** 确保所有下载的文件名遵循统一的、符合管理需求的格式。

## 描述

当前服务器下载的文件名格式是硬编码的 `pinterest_{imageId}.{fileExtension}`。此功能允许管理员通过设置 `MCP_PINTEREST_FILENAME_TEMPLATE` 环境变量来指定自定义的文件名格式。如果设置了此环境变量，所有下载的文件都将使用此模板生成名称。如果未设置，则维持默认行为。

## 实现方式

*   通过服务器环境变量 `MCP_PINTEREST_FILENAME_TEMPLATE` 实现。

## 验收标准

1.  服务器启动时，检查是否存在 `MCP_PINTEREST_FILENAME_TEMPLATE` 环境变量。
2.  如果环境变量已设置：
    *   服务器应存储此模板字符串供后续下载使用。
    *   服务器需要能解析模板中支持的变量。第一阶段必须支持的变量包括：
        *   `{imageId}`: Pinterest 图片的 ID。
        *   `{fileExtension}`: 图片的原始文件扩展名 (例如 'jpg', 'png')。
        *   `{timestamp}`: 下载时的 UTC 时间戳 (格式建议：`YYYYMMDDHHMMSS`)。
        *   `{index}`: (可选，用于批处理) 当一次操作下载多个文件时的序号 (例如 `001`, `002`)。
    *   所有后续下载的文件名都必须根据此模板生成。
    *   生成的文件名必须经过清理，移除或替换掉操作系统不允许的字符（如 `/ \ : * ? " < > |`）。
    *   如果环境变量中提供的模板字符串无效（例如，括号不匹配，或包含不支持的变量），服务器在启动时（或首次使用时）应记录警告，并**回退到使用默认模板** (`pinterest_{imageId}.{fileExtension}`)。
3.  如果环境变量未设置：
    *   服务器应继续使用默认的文件名模板 (`pinterest_{imageId}.{fileExtension}`)。
4.  此环境变量、支持的变量及其行为必须在服务器文档中清晰说明。
5.  客户端调用下载相关工具时，不能再通过任何参数指定文件名格式。

## 优先级

高 